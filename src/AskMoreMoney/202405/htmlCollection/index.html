<!--
 * @Author: HeroKing-hack 838774057@qq.com
 * @Date: 2024-10-11 22:11:15
 * @LastEditors: HeroKing-hack 838774057@qq.com
 * @LastEditTime: 2024-10-11 22:45:30
 * @FilePath: /TeacherYuan/src/AskMoreMoney/202405/htmlCollection/index.html
 * @Description: HtmlCollection 和 NodeList区别
 * 获取方式的区别: 
    HTMLCollection：通常通过以下方式获取，主要是 HTML 元素的集合。getElementsByTagName() getElementsByClassName() document.forms 等
    NodeList：可以通过多种方式获取，包含 节点（不仅限于元素节点） 的集合。querySelectorAll childNodes  
 * 是否动态更新（实时性）
    HTMLCollection 是 动态 的。如果 DOM 结构发生变化（如新增或删除元素），HTMLCollection 会自动更新。
    NodeList 是 静态 的。如果 DOM 结构发生变化，NodeList 不会自动更新。但 childNodes 返回的 NodeList 是动态的（即会更新）
 *
 * 
 * Copyright (c) 2024 by ${git_name_email}, All Rights Reserved. 
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button id="testHtmlCollection" onclick="testHtmlCollection()">
      测试HtmlCollection动态性
    </button>
    <ul id="ul">
      <li>1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
    </ul>
    <table border="1" style="border-spacing: unset">
      <thead>
        <tr>
          <th>特性</th>
          <th>HTMLCollection</th>
          <th>NodeList</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>获取方式</strong></td>
          <td><code>getElementsByTagName()</code> 等</td>
          <td><code>querySelectorAll()</code>、<code>childNodes</code> 等</td>
        </tr>
        <tr>
          <td><strong>是否动态更新</strong></td>
          <td>是</td>
          <td>否（<code>childNodes</code> 是例外）</td>
        </tr>
        <tr>
          <td><strong>包含内容</strong></td>
          <td>仅 HTML 元素</td>
          <td>任意节点（元素、文本等）</td>
        </tr>
        <tr>
          <td><strong>支持数组方法</strong></td>
          <td>不直接支持</td>
          <td>支持（部分情况）</td>
        </tr>
      </tbody>
    </table>
    <script>
      const list = document.getElementById('ul');

      //   copy四个Li元素
      let num = 100;
      const testHtmlCollection = () => {
        const liList = document.getElementsByTagName('li');
        for (let i = 0; i < liList.length; i++) {
          const li = liList[i].cloneNode(true);
          li.innerText = i + 1;
          list.appendChild(li);
          console.log(num);
          if (i > num) {
            throw new Error('无限递归');
          }
        }
      };

      window.addEventListener('error', (err) => {
        alert(err.message);
      });
    </script>
  </body>
</html>
